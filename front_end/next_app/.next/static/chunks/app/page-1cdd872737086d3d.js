(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{3829:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>w});var s=l(5155),a=l(2115),r=l(7309),o=l(5230),n=l(5855),i=l(6686),c=l(5695);let d=()=>{let[e,t]=(0,a.useState)(!1),[l,s]=(0,a.useState)(null),r=(0,a.useRef)(null),o=(0,a.useRef)([]);return{isRecording:e,audioBlob:l,startRecording:async()=>{try{t(!0);let e=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,sampleRate:44100,channelCount:1}}),l=["audio/webm","audio/mp4","audio/aac","audio/ogg"].find(e=>MediaRecorder.isTypeSupported(e))||"audio/webm";r.current=new MediaRecorder(e,{mimeType:l,audioBitsPerSecond:128e3}),r.current.ondataavailable=e=>{e.data.size>0&&o.current.push(e.data)},r.current.onstop=()=>{try{if(o.current.length>0){let e=new Blob(o.current,{type:l});s(e)}else console.warn("No audio data chunks were collected during recording");o.current=[]}catch(e){console.error("Error creating audio blob:",e)}},r.current.start(1e3)}catch(e){console.error("Error accessing microphone:",e),t(!1),e instanceof DOMException&&("NotAllowedError"===e.name?alert("请允许访问麦克风权限"):"NotFoundError"===e.name?alert("未找到录音设备"):alert("录音初始化失败，请检查设备权限"))}},stopRecording:()=>new Promise(l=>{if(r.current&&e)try{t(!1),r.current.onstop=()=>{try{if(o.current.length>0){var e;let t=new Blob(o.current,{type:(null==(e=r.current)?void 0:e.mimeType)||"audio/webm"});s(t),l(t)}else console.warn("No audio data chunks were collected during recording"),l(null);o.current=[]}catch(e){console.error("Error creating audio blob:",e),l(null)}},r.current.stop(),r.current.stream.getTracks().forEach(e=>{e.stop(),e.enabled=!1})}catch(e){console.error("Error stopping recording:",e),t(!1),l(null)}else l(null)})}};var x=l(9348),u=l(6467),h=l(4540);let m=()=>{let e=(0,c.useRouter)(),{isRecording:t,startRecording:l,stopRecording:r}=d(),[o,n]=(0,a.useState)(!1),[i,m]=(0,a.useState)(!1),f=(0,h.wA)(),p=async()=>{if(t){m(!0);try{let e=await r();if(!e){console.warn("No audio blob available after recording stopped"),m(!1);return}await g(e)}catch(e){console.error("Recording error:",e)}finally{m(!1)}}else l()},g=async t=>{try{n(!0);let l=new FormData;l.append("audio",t,"recording.webm");let s=await fetch("https://blabit.xyz/transcribe",{method:"POST",body:l});if(!s.ok)throw Error("Upload failed");let a=await s.json();console.log("Upload successful:",a),f((0,x.g)(a.text)),e.push("/context")}catch(e){console.error("Error uploading audio:",e)}finally{n(!1)}};return(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-[rgb(183,198,175)] p-0 relative",children:[o&&(0,s.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-[rgba(183,198,175,0.8)] z-50",children:(0,s.jsx)(u.A,{size:"large",tip:"Processing...",style:{color:"#8B4513"},fullscreen:!0})}),(0,s.jsxs)("div",{className:"w-full max-w-[800px] mx-auto relative h-full min-h-screen",children:[(0,s.jsx)("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 opacity-70 z-0 w-4/5",children:(0,s.jsx)("div",{className:"w-full",children:(0,s.jsx)("img",{src:"/images/1.jpg",alt:"Context Whisperer Logo",className:"rounded-lg shadow-md object-cover w-full h-auto"})})}),(0,s.jsxs)("div",{className:"absolute z-10 flex flex-col h-full w-full px-8",children:[(0,s.jsx)("div",{className:"h-[13%] flex items-end pt-8 pl-8",children:(0,s.jsx)("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-gray-600",children:"The Context"})}),(0,s.jsx)("div",{className:"h-[5%] flex justify-center items-center",children:(0,s.jsx)("h1",{className:"text-4xl sm:text-5xl md:text-6xl font-bold text-gray-800",children:"Whisperer"})}),(0,s.jsx)("div",{className:"h-[40%]"}),(0,s.jsxs)("div",{className:"h-[35%] w-full flex flex-col relative",children:[(0,s.jsx)("span",{className:"absolute inset-0 bg-white/25 backdrop-blur-xl backdrop-filter backdrop-saturate-150 rounded-lg z-0"}),(0,s.jsx)("div",{className:"flex flex-col h-full p-6 z-10 relative",children:(0,s.jsx)("div",{className:"flex items-center w-full h-full",children:(0,s.jsx)("p",{className:"text-base sm:text-xl md:text-2xl text-gray-800 w-full text-justify",children:"Like a gentle breeze carrying the first words of spring, our context generator crafts the perfect opening lines for your conversations. It weaves together phrases and translations, helping you step confidently into any dialogue, as naturally as dawn breaks over the horizon."})})})]})]})]}),(0,s.jsx)("div",{className:"absolute bottom-8 left-1/2 transform -translate-x-1/2 z-50 w-full max-w-md px-4",children:(0,s.jsx)("button",{onClick:p,disabled:i,className:"px-6 py-3 text-lg sm:text-xl md:text-2xl rounded-lg font-semibold select-none w-full shadow-lg flex items-center justify-center bg-black hover:bg-gray-800 text-[rgb(183,198,175))] transition-colors ".concat(i?"opacity-50 cursor-not-allowed":""),children:i?"PROCESSING...":t?"STOP RECORDING":"SET THE CONTEXT FOR ME"})})]})},f=()=>{let e=(0,c.useRouter)(),{isRecording:t,startRecording:l,stopRecording:r}=d(),[o,n]=(0,a.useState)(!1),[i,m]=(0,a.useState)(!1),f=(0,h.wA)(),p=async()=>{if(t){m(!0);try{let e=await r();if(!e){console.warn("No audio blob available after recording stopped"),m(!1);return}await g(e)}catch(e){console.error("Recording error:",e)}finally{m(!1)}}else l()},g=async t=>{try{n(!0);let l=new FormData;l.append("audio",t,"recording.webm");let s=await fetch("https://blabit.xyz/transcribe",{method:"POST",body:l});if(!s.ok)throw Error("Upload failed");let a=await s.json();console.log("Upload successful:",a),f((0,x.g)(a.text)),e.push("/enchanter")}catch(e){console.error("Error uploading audio:",e)}finally{n(!1)}};return(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-[rgb(181,180,162)] p-0 relative",children:[o&&(0,s.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-[rgba(181,180,162,0.8)] z-50",children:(0,s.jsx)(u.A,{size:"large",tip:"Processing...",style:{color:"#8B4513"},fullscreen:!0})}),(0,s.jsxs)("div",{className:"w-full max-w-[800px] mx-auto relative h-full min-h-screen",children:[(0,s.jsx)("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 opacity-70 z-0 w-4/5",children:(0,s.jsx)("div",{className:"w-full",children:(0,s.jsx)("img",{src:"/images/2.jpg",alt:"Context Whisperer Logo",className:"rounded-lg shadow-md object-cover w-full h-auto"})})}),(0,s.jsxs)("div",{className:"absolute z-10 flex flex-col h-full w-full px-8",children:[(0,s.jsx)("div",{className:"h-[13%] flex items-end pt-8 pl-8",children:(0,s.jsx)("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-gray-600",children:"English Enhancement"})}),(0,s.jsx)("div",{className:"h-[5%] flex justify-center items-center",children:(0,s.jsx)("h1",{className:"text-4xl sm:text-5xl md:text-6xl font-bold text-gray-800",children:"Enchanter"})}),(0,s.jsx)("div",{className:"h-[40%]"}),(0,s.jsxs)("div",{className:"h-[35%] w-full flex flex-col relative",children:[(0,s.jsx)("span",{className:"absolute inset-0 bg-white/25 backdrop-blur-xl backdrop-filter backdrop-saturate-150 rounded-lg z-0"}),(0,s.jsx)("div",{className:"flex flex-col h-full p-6 z-10 relative",children:(0,s.jsx)("div",{className:"flex items-center w-full h-full",children:(0,s.jsx)("p",{className:"text-base sm:text-xl md:text-2xl text-gray-800 w-full text-justify",children:"Your words are precious gems that deserve to shine their brightest. Let us polish them to perfection, revealing their true native brilliance. Grammar, vocabulary, and structure blend together in harmony, as we craft expressions that flow as smoothly as a mountain stream."})})})]})]})]}),(0,s.jsx)("div",{className:"absolute bottom-8 left-1/2 transform -translate-x-1/2 z-50 w-full max-w-md px-4",children:(0,s.jsx)("button",{onClick:p,disabled:i,className:"px-6 py-3 text-lg sm:text-xl md:text-2xl rounded-lg font-semibold select-none w-full shadow-lg flex items-center justify-center bg-black hover:bg-gray-800 text-[rgb(181,180,162)] transition-colors ".concat(i?"opacity-50 cursor-not-allowed":""),children:i?"PROCESSING...":t?"STOP RECORDING":"SET THE CONTEXT FOR ME"})})]})},p=()=>{let e=(0,c.useRouter)(),{isRecording:t,startRecording:l,stopRecording:r}=d(),[o,n]=(0,a.useState)(!1),[i,m]=(0,a.useState)(!1),f=(0,h.wA)(),p=async()=>{if(t){m(!0);try{let e=await r();if(!e){console.warn("No audio blob available after recording stopped"),m(!1);return}await g(e)}catch(e){console.error("Recording error:",e)}finally{m(!1)}}else l()},g=async t=>{try{n(!0);let l=new FormData;l.append("audio",t,"recording.webm");let s=await fetch("https://blabit.xyz/transcribe",{method:"POST",body:l});if(!s.ok)throw Error("Upload failed");let a=await s.json();console.log("Upload successful:",a),f((0,x.g)(a.text)),e.push("/mirror")}catch(e){console.error("Error uploading audio:",e)}finally{n(!1)}};return(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-[rgb(167,184,208)] p-0 relative",children:[o&&(0,s.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-[rgba(167,184,208,0.8)] z-50",children:(0,s.jsx)(u.A,{size:"large",tip:"Processing...",style:{color:"#8B4513"},fullscreen:!0})}),(0,s.jsxs)("div",{className:"w-full max-w-[800px] mx-auto relative h-full min-h-screen",children:[(0,s.jsx)("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 opacity-70 z-0 w-4/5",children:(0,s.jsx)("div",{className:"w-full",children:(0,s.jsx)("img",{src:"/images/3.jpg",alt:"Context Whisperer Logo",className:"rounded-lg shadow-md object-cover w-full h-auto"})})}),(0,s.jsxs)("div",{className:"absolute z-10 flex flex-col h-full w-full px-8",children:[(0,s.jsx)("div",{className:"h-[13%] flex items-end pt-8 pl-8",children:(0,s.jsx)("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-gray-600",children:"Mother Tongue"})}),(0,s.jsx)("div",{className:"h-[5%] flex justify-center items-center",children:(0,s.jsx)("h1",{className:"text-4xl sm:text-5xl md:text-6xl font-bold text-gray-800",children:"Mirror"})}),(0,s.jsx)("div",{className:"h-[40%]"}),(0,s.jsxs)("div",{className:"h-[35%] w-full flex flex-col relative",children:[(0,s.jsx)("span",{className:"absolute inset-0 bg-white/25 backdrop-blur-xl backdrop-filter backdrop-saturate-150 rounded-lg z-0"}),(0,s.jsx)("div",{className:"flex flex-col h-full p-6 z-10 relative",children:(0,s.jsx)("div",{className:"flex items-center w-full h-full",children:(0,s.jsx)("p",{className:"text-base sm:text-xl md:text-2xl text-gray-800 w-full text-justify",children:"Transform your native thoughts into elegant expressions, like watching a butterfly emerge from its chrysalis. Each translation comes adorned with crystalline clarity, while key phrases sparkle with detailed explanations - illuminating your path to understanding like stars in the night sky."})})})]})]})]}),(0,s.jsx)("div",{className:"absolute bottom-8 left-1/2 transform -translate-x-1/2 z-50 w-full max-w-md px-4",children:(0,s.jsx)("button",{onClick:p,disabled:i,className:"px-6 py-3 text-lg sm:text-xl md:text-2xl rounded-lg font-semibold select-none w-full shadow-lg flex items-center justify-center bg-black hover:bg-gray-800 text-[rgb(167,184,208)] transition-colors ".concat(i?"opacity-50 cursor-not-allowed":""),children:i?"PROCESSING...":t?"STOP RECORDING":"SET THE CONTEXT FOR ME"})})]})},g={WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",userSelect:"none"},b=()=>{let[e,t]=(0,a.useState)(0),[l,c]=(0,a.useState)(!1),[d,x]=o.Ay.useMessage(),u=[{id:0,content:(0,s.jsx)(m,{})},{id:1,content:(0,s.jsx)(f,{})},{id:2,content:(0,s.jsx)(p,{})}],h=l=>{"LEFT"===l?e<u.length-1?t(e+1):d.loading("More magical cards are being crafted — stay tuned for the wonder ahead!"):"RIGHT"===l&&(e>0?t(e-1):d.warning("This page, gently turned, marks the beginning of our journey."))},b=(0,r.uh)({onSwipedLeft:()=>h("LEFT"),onSwipedRight:()=>h("RIGHT")}),w=(e,t)=>{h(e)};return(0,s.jsxs)("div",{...b,style:{display:"flex",width:"100vw",height:"100dvh",overflow:"hidden",position:"relative",padding:0,margin:0,...g},children:[x,(0,s.jsx)("div",{className:"fixed left-0 top-0 w-1/4 h-full z-[5]",onClick:e=>w("RIGHT",e),style:{opacity:0}}),(0,s.jsx)("div",{className:"fixed right-0 top-0 w-1/4 h-full z-[5]",onClick:e=>w("LEFT",e),style:{opacity:0}}),(0,s.jsxs)("div",{className:"fixed top-0 left-0 w-full flex justify-between items-center px-5 py-4 z-10",children:[(0,s.jsx)("div",{children:(0,s.jsx)(n.A,{menu:{items:[{key:"en",label:"English"},{key:"hi",label:"Hindi (dev)",disabled:!0},{key:"zh",label:"中文 (dev)",disabled:!0},{key:"ja",label:"日本語 (dev)",disabled:!0},{key:"ko",label:"한국어 (dev)",disabled:!0},{key:"vi",label:"Tiếng Việt (dev)",disabled:!0}]},placement:"bottomLeft",children:(0,s.jsx)("div",{className:"px-4 py-2 backdrop-blur-md bg-white/20 text-white rounded-full cursor-pointer shadow-sm",children:"Language \uD83C\uDF10"})})}),(0,s.jsx)("div",{onClick:()=>c(!0),className:"px-4 py-2 backdrop-blur-md bg-white/20 text-white rounded-full cursor-pointer shadow-sm",children:(0,s.jsx)("span",{children:"⚙️"})})]}),(0,s.jsx)("div",{style:{display:"flex",transform:"translateX(-".concat(100*e,"vw)"),transition:"transform 0.5s ease",width:"".concat(100*u.length,"vw")},children:u.map(e=>(0,s.jsx)("div",{className:"min-h-screen w-screen",children:e.content},e.id))}),(0,s.jsxs)(i.A,{placement:"bottom",open:l,onClose:()=>c(!1),height:300,closeIcon:!1,maskClosable:!0,styles:{body:{padding:"16px",backgroundColor:"rgba(255, 255, 255, 0.2)",backdropFilter:"blur(10px)"},content:{backgroundColor:"rgba(255, 255, 255, 0.2)",backdropFilter:"blur(10px)"},wrapper:{backgroundColor:"rgba(255, 255, 255, 0.1)"}},children:[(0,s.jsx)("h3",{className:"text-lg font-semibold",children:"Login"}),(0,s.jsx)("p",{children:"Your may input your openai api later (dev)"})]})]})};function w(){return(0,s.jsx)(b,{})}},8830:(e,t,l)=>{Promise.resolve().then(l.bind(l,3829))},9348:(e,t,l)=>{"use strict";l.d(t,{g:()=>a,l:()=>s});let s=(0,l(1990).Z0)({name:"speech",initialState:{speechText:"None"},reducers:{setSpeechText:(e,t)=>{e.speechText=t.payload}}}),{setSpeechText:a}=s.actions}},e=>{var t=t=>e(e.s=t);e.O(0,[540,990,961,441,684,358],()=>t(8830)),_N_E=e.O()}]);