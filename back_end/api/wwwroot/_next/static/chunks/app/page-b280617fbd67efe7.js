(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{3829:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>f});var a=r(5155),o=r(2115),n=r(7309),l=r(5280),s=r(6341),i=r(5695);let c=()=>{let[e,t]=(0,o.useState)(!1),[r,a]=(0,o.useState)(null),n=(0,o.useRef)(null),l=(0,o.useRef)([]);return{isRecording:e,audioBlob:r,startRecording:async()=>{try{let e=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,sampleRate:44100,channelCount:1}}),r=["audio/webm","audio/mp4","audio/aac","audio/ogg"].find(e=>MediaRecorder.isTypeSupported(e))||"audio/webm";n.current=new MediaRecorder(e,{mimeType:r,audioBitsPerSecond:128e3}),n.current.ondataavailable=e=>{e.data.size>0&&l.current.push(e.data)},n.current.onstop=()=>{try{if(l.current.length>0){let e=new Blob(l.current,{type:r});a(e)}else console.warn("No audio data chunks were collected during recording");l.current=[]}catch(e){console.error("Error creating audio blob:",e)}},n.current.start(1e3),t(!0)}catch(e){console.error("Error accessing microphone:",e),e instanceof DOMException&&("NotAllowedError"===e.name?alert("请允许访问麦克风权限"):"NotFoundError"===e.name?alert("未找到录音设备"):alert("录音初始化失败，请检查设备权限"))}},stopRecording:()=>{if(n.current&&e)try{n.current.stop(),t(!1),n.current.stream.getTracks().forEach(e=>{e.stop(),e.enabled=!1})}catch(e){console.error("Error stopping recording:",e)}}}};var d=r(9348),u=r(4540);let h=()=>{let e=(0,i.useRouter)(),{isRecording:t,audioBlob:r,startRecording:n,stopRecording:l}=c(),[s,h]=(0,o.useState)(!1),[x,p]=(0,o.useState)(!1),g=(0,u.wA)(),f=async()=>{t?(p(!0),await l(),setTimeout(async()=>{if(!r)return void p(!1);await b(),p(!1)},100)):n()},b=async()=>{if(!r)return void console.warn("No audio blob available for upload");try{h(!0);let t=new FormData;t.append("audio",r,"recording.webm");let a=await fetch("https://blabit.xyz:5000/transcribe",{method:"POST",body:t});if(!a.ok)throw Error("Upload failed");let o=await a.json();console.log("Upload successful:",o),g((0,d.g)(o.text)),e.push("/context")}catch(e){console.error("Error uploading audio:",e)}finally{h(!1)}};return(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-100 p-6",style:{backgroundColor:"rgb(183, 198, 175)"},children:[(0,a.jsx)("h1",{className:"text-4xl font-bold text-gray-800 mb-6",children:"The Context Whisperer"}),(0,a.jsx)("p",{className:"text-lg text-gray-600 mb-8 max-w-2xl text-center",children:"Like a gentle breeze carrying the first words of spring, our context generator crafts the perfect opening lines for your conversations. It weaves together phrases and translations, helping you step confidently into any dialogue, as naturally as dawn breaks over the horizon."}),(0,a.jsxs)("div",{className:"flex flex-col items-center gap-4 w-full max-w-2xl",children:[(0,a.jsx)("button",{onClick:f,disabled:x,className:"px-6 py-3 rounded-lg font-semibold select-none w-full ".concat("bg-black hover:bg-gray-800"," text-[rgb(223,247,3)] transition ").concat(x?"opacity-50 cursor-not-allowed":""),children:x?"PROCESSING...":t?"STOP RECORDING":"START RECORDING"}),s&&(0,a.jsx)("div",{className:"text-gray-600",children:"LOADING..."})]})]})},x=()=>{let e=(0,i.useRouter)(),{isRecording:t,audioBlob:r,startRecording:n,stopRecording:l}=c(),[s,h]=(0,o.useState)(!1),[x,p]=(0,o.useState)(!1),g=(0,u.wA)(),f=async()=>{t?(p(!0),await l(),setTimeout(async()=>{if(!r)return void p(!1);await b(),p(!1)},100)):n()},b=async()=>{if(r)try{h(!0);let t=new FormData;t.append("audio",r,"recording.webm");let a=await fetch("https://blabit.xyz:5000/transcribe",{method:"POST",body:t});if(!a.ok)throw Error("Upload failed");let o=await a.json();console.log("Upload successful:",o),g((0,d.g)(o.text)),e.push("/enchanter")}catch(e){console.error("Error uploading audio:",e)}finally{h(!1)}};return(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-100 p-6",style:{backgroundColor:"rgb(181, 180, 162)"},children:[(0,a.jsx)("h1",{className:"text-4xl font-bold text-gray-800 mb-6",children:"The English Enhancement Enchanter"}),(0,a.jsx)("p",{className:"text-lg text-gray-600 mb-8 max-w-2xl text-center",children:"Your words are precious gems that deserve to shine their brightest. Let us polish them to perfection, revealing their true native brilliance. Grammar, vocabulary, and structure blend together in harmony, as we craft expressions that flow as smoothly as a mountain stream."}),(0,a.jsxs)("div",{className:"flex flex-col items-center gap-4 w-full max-w-2xl",children:[(0,a.jsx)("button",{onClick:f,disabled:x,className:"px-6 py-3 rounded-lg font-semibold select-none w-full ".concat("bg-black hover:bg-gray-800"," text-[rgb(223,247,3)] transition ").concat(x?"opacity-50 cursor-not-allowed":""),children:x?"PROCESSING...":t?"STOP RECORDING":"START RECORDING"}),s&&(0,a.jsx)("div",{className:"text-gray-600",children:"LOADING..."})]})]})},p=()=>{let e=(0,i.useRouter)(),{isRecording:t,audioBlob:r,startRecording:n,stopRecording:l}=c(),[s,h]=(0,o.useState)(!1),[x,p]=(0,o.useState)(!1),g=(0,u.wA)(),f=async()=>{t?(p(!0),await l(),setTimeout(async()=>{if(!r)return void p(!1);await b(),p(!1)},100)):n()},b=async()=>{if(r)try{h(!0);let t=new FormData;t.append("audio",r,"recording.webm");let a=await fetch("https://blabit.xyz:5000/transcribe",{method:"POST",body:t});if(!a.ok)throw Error("Upload failed");let o=await a.json();console.log("Upload successful:",o),g((0,d.g)(o.text)),e.push("/mirror")}catch(e){console.error("Error uploading audio:",e)}finally{h(!1)}};return(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen w-full p-6",style:{backgroundColor:"rgb(167, 184, 208)",width:"100%"},children:[(0,a.jsx)("h1",{className:"text-4xl font-bold text-gray-800 mb-6",children:"The Mother Tongue Mirror"}),(0,a.jsx)("p",{className:"text-lg text-gray-600 mb-8 max-w-2xl text-center",children:"Transform your native thoughts into elegant expressions, like watching a butterfly emerge from its chrysalis. Each translation comes adorned with crystalline clarity, while key phrases sparkle with detailed explanations - illuminating your path to understanding like stars in the night sky."}),(0,a.jsxs)("div",{className:"flex flex-col items-center gap-4 w-full max-w-2xl",children:[(0,a.jsx)("button",{onClick:f,disabled:x,className:"px-6 py-3 rounded-lg font-semibold select-none w-full ".concat("bg-black hover:bg-gray-800"," text-[rgb(223,247,3)] transition ").concat(x?"opacity-50 cursor-not-allowed":""),children:x?"PROCESSING...":t?"STOP RECORDING":"START RECORDING"}),s&&(0,a.jsx)("div",{className:"text-gray-600",children:"LOADING..."})]})]})},g=()=>{let[e,t]=(0,o.useState)(0),[r,i]=(0,o.useState)(!1),c=[{id:0,content:(0,a.jsx)(h,{})},{id:1,content:(0,a.jsx)(x,{})},{id:2,content:(0,a.jsx)(p,{})}],d=r=>{"LEFT"===r&&e<c.length-1?t(e+1):"RIGHT"===r&&e>0&&t(e-1)},u=(0,n.uh)({onSwipedLeft:()=>d("LEFT"),onSwipedRight:()=>d("RIGHT")});return(0,a.jsxs)("div",{...u,style:{display:"flex",width:"100vw",height:"100dvh",overflow:"hidden",position:"relative"},children:[(0,a.jsxs)("div",{className:"flex flex-row",children:[(0,a.jsxs)("div",{style:{position:"fixed",top:"20px",left:"20px",display:"flex",gap:"10px",zIndex:1e3},children:[(0,a.jsx)("button",{onClick:()=>d("RIGHT"),disabled:0===e,style:{padding:"8px 16px",backgroundColor:"rgba(0, 0, 0, 0.5)",color:"#fff",border:"2px solid #fff",borderRadius:"20px",cursor:0===e?"not-allowed":"pointer",opacity:0===e?.5:1},children:"← 上一页"}),(0,a.jsx)("button",{onClick:()=>d("LEFT"),disabled:e===c.length-1,style:{padding:"8px 16px",backgroundColor:"rgba(0, 0, 0, 0.5)",color:"#fff",border:"2px solid #fff",borderRadius:"20px",cursor:e===c.length-1?"not-allowed":"pointer",opacity:e===c.length-1?.5:1},children:"下一页 →"})]}),(0,a.jsx)(l.A,{menu:{items:[{key:"en",label:"English"},{key:"hi",label:"Hindi (dev)",disabled:!0},{key:"zh",label:"中文 (dev)",disabled:!0},{key:"ja",label:"日本語 (dev)",disabled:!0},{key:"ko",label:"한국어 (dev)",disabled:!0},{key:"vi",label:"Tiếng Việt (dev)",disabled:!0}]},placement:"bottomLeft",children:(0,a.jsx)("div",{style:{position:"fixed",top:"20px",left:"300px",padding:"8px 16px",backgroundColor:"rgba(0, 0, 0, 0.5)",color:"#fff",border:"2px solid #fff",borderRadius:"20px",cursor:"pointer",zIndex:1e3},children:"Language \uD83C\uDF10"})}),(0,a.jsx)("div",{onClick:()=>i(!0),style:{position:"fixed",top:"20px",right:"20px",width:"50px",height:"50px",borderRadius:"50%",border:"2px solid #fff",backgroundColor:"rgba(0, 0, 0, 0.5)",cursor:"pointer",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,a.jsx)("span",{style:{color:"#fff"},children:"⚙️"})})]}),(0,a.jsx)("div",{style:{display:"flex",transform:"translateX(-".concat(100*e,"vw)"),transition:"transform 0.5s ease",width:"".concat(100*c.length,"vw")},children:c.map(e=>(0,a.jsx)("div",{className:"min-h-screen w-screen",children:e.content},e.id))}),(0,a.jsxs)(s.A,{placement:"bottom",open:r,onClose:()=>i(!1),height:300,closeIcon:!1,maskClosable:!0,children:[(0,a.jsx)("h3",{children:"Login"}),(0,a.jsx)("p",{children:"这里可以放置你的抽屉内容"})]})]})};function f(){return(0,a.jsx)(g,{})}},8830:(e,t,r)=>{Promise.resolve().then(r.bind(r,3829))},9348:(e,t,r)=>{"use strict";r.d(t,{g:()=>o,l:()=>a});let a=(0,r(1990).Z0)({name:"speech",initialState:{speechText:"None"},reducers:{setSpeechText:(e,t)=>{e.speechText=t.payload}}}),{setSpeechText:o}=a.actions}},e=>{var t=t=>e(e.s=t);e.O(0,[540,990,822,441,684,358],()=>t(8830)),_N_E=e.O()}]);