(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1767:(e,t,r)=>{Promise.resolve().then(r.bind(r,4682))},4682:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>f});var a=r(5155),n=r(2115),i=r(5230),o=r(3853),l=r(3299),s=r(6686),c=r(5695),d=r(4540),u=r(9033);let h=()=>{let[e,t]=(0,n.useState)(!1),[r,a]=(0,n.useState)(null),[i,o]=(0,n.useState)(""),l=(0,n.useRef)(null),s=(0,n.useRef)([]),c=()=>{for(let e of[{mimeType:"audio/webm",extension:"webm"},{mimeType:"audio/mp4",extension:"mp4"},{mimeType:"audio/ogg",extension:"ogg"},{mimeType:"audio/wav",extension:"wav"},{mimeType:"audio/aac",extension:"aac"}])if(MediaRecorder.isTypeSupported(e.mimeType))return e;return{mimeType:"",extension:"webm"}};return{isRecording:e,audioBlob:r,audioFormat:i,startRecording:async()=>{try{t(!0);let e=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,sampleRate:44100,channelCount:1}}),{mimeType:r,extension:n}=c();o(n);let i={audioBitsPerSecond:128e3};r&&(i.mimeType=r),l.current=new MediaRecorder(e,i),l.current.ondataavailable=e=>{e.data.size>0&&s.current.push(e.data)},l.current.onstop=()=>{try{if(s.current.length>0){var e;let t=(null==(e=l.current)?void 0:e.mimeType)||r||"audio/webm",n=new Blob(s.current,{type:t});a(n)}else console.warn("No audio data chunks were collected during recording");s.current=[]}catch(e){console.error("Error creating audio blob:",e)}},l.current.start(1e3)}catch(e){console.error("Error accessing microphone:",e),t(!1),e instanceof DOMException&&("NotAllowedError"===e.name?alert("请允许访问麦克风权限"):"NotFoundError"===e.name?alert("未找到录音设备"):alert("录音初始化失败，请检查设备权限"))}},stopRecording:()=>new Promise(r=>{if(l.current&&e)try{t(!1),l.current.onstop=()=>{try{if(s.current.length>0){var e;let t=(null==(e=l.current)?void 0:e.mimeType)||"audio/webm",n=new Blob(s.current,{type:t});a(n),r(n)}else console.warn("No audio data chunks were collected during recording"),r(null);s.current=[]}catch(e){console.error("Error creating audio blob:",e),r(null)}},l.current.stop(),l.current.stream.getTracks().forEach(e=>{e.stop(),e.enabled=!1})}catch(e){console.error("Error stopping recording:",e),t(!1),r(null)}else r(null)})}};var g=r(7239),m=r(3038);function p(e){let{card_info:t}=e,r=(0,c.useRouter)(),{isRecording:i,startRecording:o,stopRecording:l,audioFormat:s}=h(),[p,x]=(0,n.useState)(!1),[b,w]=(0,n.useState)(!1),f=(0,d.wA)(),v=async()=>{if(i){w(!0);let e=await l();if(!e)return void w(!1);await y(e),w(!1)}else o()},y=async e=>{x(!0);let a=new FormData,n="recording.".concat(s||"webm");a.append("audio",e,n),console.log("Uploading audio file with name: ".concat(n));let i=await fetch(u.i+"/transcribe",{method:"POST",body:a});console.log(i.json);let o=await i.json();f((0,g.g)(o.text)),r.push(t.api_url),x(!1)};return(0,a.jsxs)("div",{className:"w-dvw h-dvh",style:{backgroundColor:t.main_color},children:[p&&(0,a.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-[rgba(183,198,175,0.8)] z-50",children:(0,a.jsx)(m.A,{size:"large",tip:"Processing...",style:{color:"#8B4513"},fullscreen:!0})}),(0,a.jsxs)("div",{className:"absolute flex flex-col w-dvw h-dvh",children:[(0,a.jsx)("div",{className:"grow-7",children:(0,a.jsx)("img",{className:"object-contain shadow-md rounded-lg",src:t.bg_image,alt:""})}),(0,a.jsx)("div",{className:"grow-3"})]}),(0,a.jsxs)("div",{className:"absolute flex flex-col w-dvw h-dvh font-jaini",children:[(0,a.jsx)("div",{className:"grow-13"}),(0,a.jsx)("div",{className:"grow-3 text-start align-middle text-2xl px-5",children:t.title_line_one}),(0,a.jsx)("div",{className:"grow-3 w-full text-center align-middle text-5xl",children:t.title_line_two}),(0,a.jsx)("div",{className:"grow-55"}),(0,a.jsxs)("div",{className:"grow-20 flex flex-col bg-white/25 backdrop-blur-xl backdrop-filter backdrop-saturate-150 rounded-2xl px-3 py-3",children:[(0,a.jsx)("div",{className:"grow-50 text-xl",children:t.description}),(0,a.jsx)("div",{className:"grow-10"}),(0,a.jsx)("button",{className:"grow-30 w-full bg-black text-center align-middle text-xl",onClick:v,disabled:b,style:{color:t.main_color},children:b?"PROCESSING...":i?"STOP RECORDING":t.button}),(0,a.jsx)("div",{className:"grow-20"})]})]})]})}let x={main_color:"rgb(183,198,175)",bg_image:"/images/1.jpg",title_line_one:"The Context",title_line_two:"Whisperer",description:"Like a gentle breeze carrying the first words of spring, our context generator crafts the perfect opening lines for your conversations. It weaves together phrases and translations, helping you step confidently into any dialogue, as naturally as dawn breaks over the horizon.",button:"SET THE CONTEXT FOR ME",api_url:"/context"},b={main_color:"rgb(181,180,162)",bg_image:"/images/2.jpg",title_line_one:"English Enhancement",title_line_two:"Enchanter",description:"Your words are precious gems that deserve to shine their brightest. Let us polish them to perfection, revealing their true native brilliance. Grammar, vocabulary, and structure blend together in harmony, as we craft expressions that flow as smoothly as a mountain stream.",button:"SET THE CONTEXT FOR ME",api_url:"/enchanter"},w={main_color:"rgb(167,184,208)",bg_image:"/images/3.jpg",title_line_one:"Mother Tongue",title_line_two:"Mirror",description:"Transform your native thoughts into elegant expressions, like watching a butterfly emerge from its chrysalis. Each translation comes adorned with crystalline clarity, while key phrases sparkle with detailed explanations - illuminating your path to understanding like stars in the night sky..",button:"SET THE CONTEXT FOR ME",api_url:"/mirror"};function f(){let[e,t]=(0,n.useState)(!1),[r,c]=i.Ay.useMessage(),d=(0,n.useRef)(null),u=[{id:0,content:(0,a.jsx)(p,{card_info:x})},{id:1,content:(0,a.jsx)(p,{card_info:b})},{id:2,content:(0,a.jsx)(p,{card_info:w})}],h=e=>{var t,r;"LEFT"===e?null==(t=d.current)||t.next():"RIGHT"===e&&(null==(r=d.current)||r.prev())},g=e=>{h(e)};return(0,a.jsxs)("div",{className:"fixed flex flex-col h-dvh w-dvw select-none",children:[c,(0,a.jsxs)("div",{className:"fixed top-0 left-0 h-[10%] w-dvw flex justify-between items-center px-5 py-4 z-10",children:[(0,a.jsx)("div",{children:(0,a.jsx)(o.A,{menu:{items:[{key:"en",label:"English"},{key:"hi",label:"Hindi (dev)",disabled:!0},{key:"zh",label:"中文 (dev)",disabled:!0},{key:"ja",label:"日本語 (dev)",disabled:!0},{key:"ko",label:"한국어 (dev)",disabled:!0},{key:"vi",label:"Tiếng Việt (dev)",disabled:!0}]},placement:"bottomLeft",children:(0,a.jsx)("div",{className:"backdrop-blur-md bg-white/20 text-white rounded-full cursor-pointer shadow-sm px-4 py-2 ",children:"Language \uD83C\uDF10"})})}),(0,a.jsx)("div",{onClick:()=>t(!0),className:"px-4 py-2 backdrop-blur-md bg-white/20 text-white rounded-full cursor-pointer shadow-sm",children:(0,a.jsx)("span",{children:"⚙️"})})]}),(0,a.jsx)("div",{className:"fixed left-0 top-0 w-1/4 h-dvh z-5",onClick:()=>g("RIGHT"),style:{opacity:0}}),(0,a.jsx)("div",{className:"fixed right-0 top-0 w-1/4 h-dvh z-5",onClick:()=>g("LEFT"),style:{opacity:0}}),(0,a.jsx)(l.A,{ref:d,dots:!1,infinite:!1,beforeChange:(e,t)=>{0===e&&0===t?r.warning("This page, gently turned, marks the beginning of our journey."):e===u.length-1&&t===u.length-1&&r.loading("More magical cards are being crafted — stay tuned for the wonder ahead!")},className:"w-dvw h-dvh overflow-hidden",effect:"scrollx",draggable:!0,children:u.map(e=>(0,a.jsx)("div",{className:"w-dvw h-dvh",children:e.content},e.id))}),(0,a.jsxs)(s.A,{placement:"bottom",open:e,onClose:()=>t(!1),height:300,closeIcon:!1,maskClosable:!0,styles:{body:{padding:"16px",backgroundColor:"rgba(255, 255, 255, 0.2)",backdropFilter:"blur(10px)"},content:{backgroundColor:"rgba(255, 255, 255, 0.2)",backdropFilter:"blur(10px)"},wrapper:{backgroundColor:"rgba(255, 255, 255, 0.1)"}},children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Login"}),(0,a.jsx)("p",{children:"Your may input your openai api later (dev)"})]})]})}},7239:(e,t,r)=>{"use strict";r.d(t,{g:()=>n,l:()=>a});let a=(0,r(1990).Z0)({name:"speech",initialState:{speechText:"None"},reducers:{setSpeechText:(e,t)=>{e.speechText=t.payload}}}),{setSpeechText:n}=a.actions},9033:(e,t,r)=>{"use strict";r.d(t,{i:()=>a});let a="https://blabit.xyz"}},e=>{var t=t=>e(e.s=t);e.O(0,[540,990,152,441,684,358],()=>t(1767)),_N_E=e.O()}]);